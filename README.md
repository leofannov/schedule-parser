# schedule-parser
–ü–∞—Ä—Å–µ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ PHP, –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–µ
üìö –ü–∞—Ä—Å–µ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π –∏–∑ Excel-—Ñ–∞–π–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á—ë—Ç–Ω—ã—Ö/–Ω–µ—á—ë—Ç–Ω—ã—Ö –Ω–µ–¥–µ–ª—å –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

¬∑ üìÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –Ω–µ–¥–µ–ª–∏ (—á—ë—Ç–Ω–∞—è/–Ω–µ—á—ë—Ç–Ω–∞—è)
¬∑ üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
¬∑ üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
¬∑ üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
¬∑ ‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
¬∑ üéØ –ü—Ä–æ—Å—Ç–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –Ω–µ–¥–µ–ª—è–º–∏
¬∑ üõ† –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ cache/                    # –ü–∞–ø–∫–∞ –¥–ª—è –∫—ç—à–∞ –∏ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ schedule.xlsx        # –°–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ schedule_data.cache  # –ö—ç—à HTML-—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ update_error.log     # –õ–æ–≥ –æ—à–∏–±–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ images/                  # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ rasp_mon.jpg        # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ rasp.jpg            # –û—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤
‚îú‚îÄ‚îÄ vendor/                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Composer
‚îú‚îÄ‚îÄ cron_download.php        # –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ index.php               # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ rasp.php                # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤
‚îú‚îÄ‚îÄ schedule_parser.php     # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ø–∞—Ä—Å–µ—Ä–∞
‚îú‚îÄ‚îÄ week_config.php         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ–¥–µ–ª—å
‚îî‚îÄ‚îÄ composer.json           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
```

‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/leofannov/schedule-parser.git
cd schedule-parser
```

2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
composer install
```

3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
chmod 755 cache/
chmod 644 cache/*
```

4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–µ–¥–µ–ª—å

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª week_config.php:

```php
return [
    'base_week_type' => 'odd',    // –¢–∏–ø –±–∞–∑–æ–≤–æ–π –Ω–µ–¥–µ–ª–∏ (even/odd)
    'base_week_number' => 36,     // –ù–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏ –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    'set_date' => '2025-09-01'    // –î–∞—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
];
```

5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab:

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞
0 */2 * * * /usr/bin/php /path/to/project/cron_download.php

# –ò–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 6:00
0 6 * * * /usr/bin/php /path/to/project/cron_download.php
```

üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

¬∑ URL: index.php
¬∑ –§—É–Ω–∫—Ü–∏–∏:
  ¬∑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏
  ¬∑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —á—ë—Ç–Ω–æ–π/–Ω–µ—á—ë—Ç–Ω–æ–π –Ω–µ–¥–µ–ª—è–º–∏
  ¬∑ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
  ¬∑ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤

¬∑ URL: rasp.php
¬∑ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∑–≤–æ–Ω–∫–æ–≤

–†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

```bash
php cron_download.php
```

üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ —è—á–µ–µ–∫ Excel

–í —Ñ–∞–π–ª–µ schedule_parser.php –≤ —Å–≤–æ–π—Å—Ç–≤–µ $ranges –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞:

```php
private $ranges = [
    'even' => [
        '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫' => [
            'schedule' => 'BX97:CA110',      // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            'pair_numbers' => 'B97:B110',    // –ù–æ–º–µ—Ä–∞ –ø–∞—Ä
            'time' => 'D97:D110'            // –í—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏–π
        ],
        // ... –¥—Ä—É–≥–∏–µ –¥–Ω–∏
    ],
    'odd' => [
        // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –Ω–µ—á—ë—Ç–Ω–æ–π –Ω–µ–¥–µ–ª–∏
    ]
];
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–í cron_download.php —É–∫–∞–∂–∏—Ç–µ URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è Excel-—Ñ–∞–π–ª–∞:

```php
$excelUrl = 'http://your-domain.com/path/to/schedule.xlsx';
```

üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π

–°—Ç–∏–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ renderHeader() –∫–ª–∞—Å—Å–∞ ScheduleParser. –û—Å–Ω–æ–≤–Ω—ã–µ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```css
--primary-color: #4CAF50;      /* –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç */
--background-color: #ffffff;   /* –§–æ–Ω */
--text-color: #333333;         /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
--border-color: #dddddd;       /* –¶–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü */
```

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏

–í –º–∞—Å—Å–∏–≤–µ $ranges –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –¥–Ω–∏:

```php
'–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ' => [
    'schedule' => 'BX181:CA194',
    'pair_numbers' => 'B181:B194', 
    'time' => 'D181:D194'
]
```

üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ cache/
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL Excel-—Ñ–∞–π–ª–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ cache/update_error.log

–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ week_config.php
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–∏: date('W')

–û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Excel-—Ñ–∞–π–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ª–∏—Å—Ç–æ–≤ –≤ —Ñ–∞–π–ª–µ
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Composer

üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

¬∑ –û—à–∏–±–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: cache/update_error.log
¬∑ –û—à–∏–±–∫–∏ PHP: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ª–æ–≥ –æ—à–∏–±–æ–∫ PHP
¬∑ –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ñ—É—Ç–µ—Ä–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

üîÑ API

ScheduleParser Class

–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```php
$parser = new ScheduleParser();
$parser->displayFullSchedule(); // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```

üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

¬∑ PHP 7.4+
¬∑ Composer
¬∑ –†–∞—Å—à–∏—Ä–µ–Ω–∏—è PHP: zip, xml, dom
¬∑ –î–æ—Å—Ç—É–ø –∫ crontab (–¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

üë• –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏ (git checkout -b feature/AmazingFeature)
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (git commit -m 'Add some AmazingFeature')
4. –ó–∞–ø—É—à—å—Ç–µ –≤ –≤–µ—Ç–∫—É (git push origin feature/AmazingFeature)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ PHP
php -l schedule_parser.php

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
composer validate

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
php -S localhost:8000
```

üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

–í–µ—Ä—Å–∏—è: 1.0.0
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025
